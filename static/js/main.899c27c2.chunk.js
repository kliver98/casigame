(this.webpackJsonpcasigame=this.webpackJsonpcasigame||[]).push([[0],{37:function(e,t,s){},61:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(1),c=s(30),r=s.n(c),l=(s(37),s(14)),o=s(2),i=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"404"}),Object(n.jsx)("h3",{children:"Page Not Found"}),Object(n.jsx)("div",{children:"Sorry, but the page you are looking for has not been found. Try checking the URL for error, then hit the refresh button on your browser."})]})},d=s(9),u=s(4),m=s.n(u),j="https://casigame.herokuapp.com/api",b=s(12),h=s(13),p=s(16),O=s(15),x=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(){var e;Object(b.a)(this,s);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).checkFields=function(e){return!(""===e._id||""===e.username||e.username.length<3||e.username.length>10||""===e.password||e.password.length<5||e.password.length>10)},e.submit=function(t){m.a.post(j+"/users",t).then((function(t){if(200===t.status||201===t.status)return document.getElementById("message").innerHTML="<span style='color:green;'>Creado correctamente</span>",void e.props.reload()})),document.getElementById("message").innerHTML="<span style='color:red;'>Ocurrio un error, cambia los datos o intenta m\xe1s tarde</span>"},e}return Object(h.a)(s,[{key:"Form1",value:function(){var e=this;return Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("form",{className:"form-horizontal",onSubmit:function(t){return e.handleSubmit(t)},children:Object(n.jsxs)("fieldset",{children:[Object(n.jsxs)("div",{id:"legend",children:[Object(n.jsx)("legend",{className:"",children:"Registrarse"}),Object(n.jsx)("span",{id:"message"})]}),Object(n.jsx)("div",{className:"progress mb-2",children:Object(n.jsx)("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:"100%"},"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"fullname",children:"Nombre completo"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"text",id:"fullname",name:"fullname",placeholder:"",autoComplete:"off",className:"col-10"})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"username",children:"Usuario"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"text",id:"username",name:"username",placeholder:"Min:3 y Max:10 caracteres",autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"password",children:"Contrase\xf1a"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Min:5 y Max:10 caracteres",autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"_id",children:"N\xfamero de identificaci\xf3n"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"number",id:"_id",name:"_id",placeholder:"",autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsx)("div",{className:"control-group mt-4",children:Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-success",children:"Registrarse"})})})]})})})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={fullname:document.getElementById("fullname").value,_id:parseInt(document.getElementById("_id").value),username:document.getElementById("username").value,password:document.getElementById("password").value};this.checkFields(t)?this.submit(t):document.getElementById("message").innerHTML="<span style='color:red;'>Error, verifique los campos</span>"}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"container",children:this.Form1()})}}]),s}(a.Component),f=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(e){var n;return Object(b.a)(this,s),(n=t.call(this)).checkFields=function(e){return!(""===e._id||""===e.username||e.username.length<3||e.username.length>10||""===e.password||e.password.length<5||e.password.length>10)},n.submit=function(e){m.a.put(j+"/users/"+n.userId,e).then((function(e){200!==e.status&&201!==e.status||(document.getElementById("message").innerHTML="<span style='color:green;'>Editado correctamente</span>")})),document.getElementById("message").innerHTML="<span style='color:red;'>Ocurrio un error, cambia los datos o intenta m\xe1s tarde</span>"},n.userId=e.id,n.user={},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this;m.a.get(j+"/users/").then((function(t){e.user=t.data.filter((function(t){return t._id===e.userId}))[0]}))}},{key:"Form1",value:function(){var e=this;return Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("form",{className:"form-horizontal",onSubmit:function(t){return e.handleSubmit(t)},children:Object(n.jsxs)("fieldset",{children:[Object(n.jsxs)("div",{id:"legend",children:[Object(n.jsx)("legend",{className:"",children:"Editar"}),Object(n.jsx)("span",{id:"message"})]}),Object(n.jsx)("div",{className:"progress mb-2",children:Object(n.jsx)("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:"100%"},"aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"})}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"fullname",children:"Nombre completo"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"text",id:"fullname",name:"fullname",defaultValue:this.user.fullname,placeholder:"",autoComplete:"off",className:"col-10"})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"username",children:"Usuario"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"text",id:"username",name:"username",defaultValue:this.user.username,placeholder:"Min:3 y Max:10 caracteres",autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"password",children:"Contrase\xf1a"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"password",id:"password",name:"password",defaultValue:this.user.password,placeholder:"Min:5 y Max:10 caracteres",autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"_id",children:"N\xfamero de identificaci\xf3n"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"number",id:"_id",name:"_id",placeholder:"",disabled:!0,defaultValue:this.user._id,autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"money",children:"Dinero"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"number",id:"money",name:"money",placeholder:"",defaultValue:this.user.money,autoComplete:"off",className:"col-10",required:!0})})]}),Object(n.jsx)("div",{className:"control-group mt-4",children:Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-success",children:"Modificar"})})})]})})})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={fullname:document.getElementById("fullname").value,_id:parseInt(document.getElementById("_id").value),username:document.getElementById("username").value,password:document.getElementById("password").value,money:document.getElementById("money").value};this.checkFields(t)?this.submit(t):document.getElementById("message").innerHTML="<span style='color:red;'>Error, verifique los campos</span>"}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"container",children:this.Form1()})}}]),s}(a.Component);function g(e){var t=e.toString(),s="";if(e.toString().length<4)return e;for(var n=t.length-1;n>=0;n--)s+=t[n],(t.length-n)%3===0&&0!==n&&(s+=".");return s.split("").reverse().join("")}var v=function(e){var t=e.users,s=e.reload,c=Object(a.useState)(!1),r=Object(d.a)(c,2),l=r[0],o=r[1],i=Object(a.useState)(-1),u=Object(d.a)(i,2),b=u[0],h=u[1];function p(e,t,a){var c={cursor:"pointer"};return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:t}),Object(n.jsx)("td",{children:e}),Object(n.jsxs)("td",{children:["$ ",g(a)]}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fas fa-user-edit mr-2",style:c,onClick:function(){s(),h(t)}}),Object(n.jsx)("i",{className:"fas fa-user-minus",style:c,onClick:function(){return function(e){m.a.delete(j+"/users/"+e).then((function(){return s()}))}(t)}})]})]},t)}return Object(n.jsxs)("div",{className:"",children:[Object(n.jsx)("button",{type:"button",className:"btn btn-secondary mr-1 col-md-5",onClick:function(){s(),o(!0),h(-1)},children:"Crear Usuario"}),Object(n.jsx)("button",{type:"button",className:"btn btn-primary ml-1 col-md-5",onClick:function(){s(),o(!1),h(-1)},children:"Ver Usuarios"}),Object(n.jsx)("div",{className:"mb-4"}),-1!==b?Object(n.jsx)(f,{id:b}):"",t.length>0&&!l&&-1===b?Object(n.jsxs)("table",{className:"table bg-info",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"ID"}),Object(n.jsx)("th",{scope:"col",children:"Nombre de usuario"}),Object(n.jsx)("th",{scope:"col",children:"Dinero disponible"}),Object(n.jsx)("th",{scope:"col",children:"Opciones"})]})}),Object(n.jsx)("tbody",{children:t.map((function(e){return p(e.username,e._id,e.money)}))})]}):l?Object(n.jsx)(x,{reload:s}):"No hay usuarios para mostrar"]})},N=[],y=function(e){var t=e.users,s=e.reloadUsers,c=Object(a.useState)(""),r=Object(d.a)(c,2),l=r[0],o=r[1],i=Object(a.useState)(!1),u=Object(d.a)(i,2),b=u[0],h=u[1],p=Object(a.useState)([]),O=Object(d.a)(p,2),x=O[0],f=O[1],v=Object(a.useState)([]),y=Object(d.a)(v,2),w=y[0],I=y[1];function E(e,t){var n,a,c=e;setInterval((function(){n=parseInt(c/60,10),a=parseInt(c%60,10),n=n<10?"0"+n:n,a=a<10?"0"+a:a,t.textContent=n+":"+a,--c<0&&(c=e,m.a.get(j+"/games/generate-random").then((function(e){var t=e.data.random,n=Date.now();N.forEach((function(e){var s=t!==e.mode?-1*e.amount:"green"===t?10*e.amount:2*e.amount,a={winner:t,date:n,id:e.id,amount:e.amount,mode:e.mode,payed:s};m.a.post(j+"/games",a),m.a.get(j+"/users/"+a.id).then((function(e){(e.status<200||e.status>=300)&&C("Error: No se pudo pagar ["+a.amount+"] a ["+a.id+"]","danger");var t=e.data;t.money=t.money+a.payed,m.a.put(j+"/users/"+a.id,t).then((function(e){(e.status<200||e.status>=300)&&C("Error: No se pudo pagar ["+a.amount+"] a ["+a.id+"]","danger")}))}))})),setTimeout((function(){h(!b),s()}),500)})),setTimeout((function(){N=[]}),500))}),1e3)}function C(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;f([e,t]),setTimeout((function(){return f([])}),s)}function k(){var e=document.getElementById("user"),t=document.getElementById("mode"),s={id:e.childNodes[e.selectedIndex].value,amount:document.getElementById("bet").value,mode:t.childNodes[t.selectedIndex].value};!function(e){var t="red"===e.mode||"green"===e.mode||"black"===e.mode;return!(isNaN(e.id)||isNaN(e.amount)||!t)}(s)?C("Error: hay campos incorrectos","danger"):m.a.get(j+"/users/"+s.id).then((function(e){var t=e.data;200===e.status&&t?t.money>1e3?(s.amount=Math.floor(t.money*s.amount/100),C("Se apostara $ "+g(s.amount)+" [Id: "+s.id+"] para "+s.mode,"success")):t.money>0?(s.amount=t.money,C("Advertencia: Se apostara ALL IN [MIN: 1000]","warning")):C("Error: no tiene fondos suficientes [dinero: "+t.money+"]","danger"):C("Error: no se encontro usuario. Verifique id ["+s.id+"]","danger")})).then((function(){s.amount>100&&N.push(s)}))}return Object(a.useEffect)((function(){m.a.get(j+"/games/last").then((function(e){200===e.status&&(I(e.data),o(e.data[0].winner))}))}),[b]),window.onload=function(){E(180,document.getElementById("time"))},Object(n.jsxs)("div",{className:"container mt-3 pt-2 pb-2",style:{background:"gainsboro"},children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsxs)("select",{className:"form-select",id:"user","aria-label":"Select user",children:[Object(n.jsx)("option",{defaultValue:!0,children:"Seleccione usuario"}),t.map((function(e){return Object(n.jsx)("option",{value:e._id,children:e.username+" - "+e._id},e._id)}))]})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"bet",children:"Cantidad de apuesta %"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsx)("input",{type:"number",id:"bet",name:"bet",placeholder:"min:11 - max:19",autoComplete:"off",className:"col-10",required:!0,min:"11",max:"19",step:"0.1",defaultValue:"11"})})]}),Object(n.jsxs)("div",{className:"control-group",children:[Object(n.jsx)("label",{className:"control-label",htmlFor:"betMode",children:"Modo apuesta"}),Object(n.jsx)("div",{className:"controls",children:Object(n.jsxs)("select",{className:"form-select",id:"mode","aria-label":"Color",children:[Object(n.jsx)("option",{value:"green",children:"Green - 1%"}),Object(n.jsx)("option",{value:"red",children:"Red - 49.5%"}),Object(n.jsx)("option",{value:"black",children:"Black - 49.5%"})]})})]}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{type:"button",className:"btn btn-info",onClick:function(){return k()},children:"Apostar"})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("h5",{children:"Siguiente juego autom\xe1tico en: "}),Object(n.jsx)("h5",{id:"time",children:" 00:00 "})]}),x?Object(n.jsx)("div",{id:"messagePropmt",className:"alert alert-"+x[1],role:"alert",children:x[0]}):"",Object(n.jsxs)("div",{className:"col-12",style:{color:"DarkSlateGray"},children:[Object(n.jsxs)("h5",{children:["\xdaltimo juego [Color: ",l,"]"]}),Object(n.jsxs)("table",{id:"lastBet",className:"table table-striped",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"ID"}),Object(n.jsx)("th",{scope:"col",children:"Cantidad Apostada"}),Object(n.jsx)("th",{scope:"col",children:"Modo"}),Object(n.jsx)("th",{scope:"col",children:"Pago"})]})}),Object(n.jsx)("tbody",{children:w.map((function(e){return t=e.id,s=e.amount,a=e.mode,c=e.payed,Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"row",children:t}),Object(n.jsx)("td",{children:g(s)}),Object(n.jsx)("td",{children:a}),Object(n.jsx)("td",{children:g(c)})]},t);var t,s,a,c}))})]})]})]})},w=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),s=t[0],c=t[1],r=Object(a.useState)(Date.now),l=Object(d.a)(r,2),o=l[0],i=l[1];function u(){i(Date.now)}return Object(a.useEffect)((function(){m.a.get(j+"/users").then((function(e){200===e.status&&c(e.data)}))}),[o]),Object(n.jsx)("div",{className:"pl-4 pr-4 pt-3",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-7 col-sm-12 text-center",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("h2",{children:"Juego"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(y,{users:s,reloadUsers:u})]})})}),Object(n.jsxs)("div",{className:"col-lg-5 col-sm-12 text-center",children:[Object(n.jsx)("h2",{children:"Gesti\xf3n de usuarios"}),Object(n.jsx)("br",{}),Object(n.jsx)(v,{users:s,reload:u})]})]})})},I=Object(n.jsx)(l.a,{basename:"/casigame",children:Object(n.jsxs)(o.c,{children:[Object(n.jsx)(o.a,{path:"/",exact:!0,component:w}),Object(n.jsx)(o.a,{path:"*",component:i})]})}),E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,62)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};r.a.render(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(l.a,{children:I})}),document.getElementById("root")),E()}},[[61,1,2]]]);
//# sourceMappingURL=main.899c27c2.chunk.js.map